import { fd_write, iovec} from 'bindings/wasi';
import { allocateSampleBuffer, getTick, setBPM, setPatternsPtr, setInstrumentPatternListPtr, fillSampleBufferInterleaved } from './index';

const patterns: i8[] = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,1,1,1,33,1,36,38,0,36,1,33,36,0,38,1,33,1,45,1,0,0,33,1,36,1,48,1,36,48,0,50,100,0,0,0,100,0,0,10,100,0,0,0,100,0,0,0,90,20,90,20,90,20,90,20,90,20,90,20,90,20,90,20,0,0,0,0,60,0,0,0,0,0,0,0,60,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,1,1,1,0,0,0,0,0,0,0,0,62,1,1,1,64,1,1,1,0,0,0,0,0,0,0,0,64,1,1,1,62,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,64,1,1,64,0,0,0,0,62,1,1,62,0,0,0,0,66,1,1,1,0,0,0,0,0,0,0,0,66,1,1,1,67,1,1,1,0,0,0,0,0,0,0,0,67,1,1,1,66,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,67,1,1,67,0,0,0,0,67,1,1,67,0,0,0,0,57,1,1,1,0,0,0,0,0,0,0,0,57,1,1,1,60,1,1,1,0,0,0,0,0,0,0,0,71,1,1,1,69,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,72,1,1,72,0,0,0,0,71,1,1,71,0,0,0,0,0,0,0,0,60,0,0,0,0,0,0,30,60,0,0,40,0,0,57,1,62,1,57,1,62,1,1,64,1,1,60,1,1,1,59,1,60,1,59,1,60,1,1,59,1,1,57,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,67,1,67,1,67,1,67,1,1,69,1,1,66,0,62,64,67,0,71,0,0,74,0,67,0,0,0,0,0,0,31,1,43,1,0,0,0,0,26,38,0,41,0,41,43,0,26,1,38,1,0,0,0,0,21,33,0,36,0,36,38,0,29,1,41,1,0,0,0,0,24,36,0,39,0,39,41,0,24,1,36,1,0,0,0,0,19,31,0,34,0,34,36,0,0,0,67,0,67,0,67,71,0,72,0,71,0,67,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65,0,65,62,0,65,0,67,0,69,0,0,67,0,0,64,0,62,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,65,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,64,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,67,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,69,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,71,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,72,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,75,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65,62,0,65,0,67,0,69,0,0,67,0,0,0,72,0,72,71,0,72,0,74,0,71,0,0,67,0,0,0,0,62,74,0,62,74,0,62,0,69,1,1,67,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,67,0,74,72,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,71,1,1,1,67,1,1,1,0,0,0,0,1,1,1,1,71,1,1,1,67,1,1,1,69,1,1,1,72,1,1,1,1,1,1,1,1,1,1,1,71,1,69,1,67,1,1,1,1,1,1,1,1,1,1,1,1,1,64,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,16,32,48,64,0,0,0,0,0,0,0,0,0,0,0,32,40,48,64,0,0,0,0,0,0,0,0,0,0,0,0,74,1,1,1,1,1,1,1,1,1,1,1,1,1,1,77,1,1,1,1,1,1,1,1,1,1,1,1,76,1,74,1,72,1,1,1,1,1,1,1,1,1,1,1,1,1,79,1,2,16,32,48,64,0,0,0,0,0,0,0,0,80,96,32,36,40,48,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,80,96,112,127,0,0,0,0,0,20,0,30,60,0,0,20,0,20,0,30,60,20,60,40,81,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,64,0,48,32,16,0,0,0,0,64,0,0,0,0,0,0,57,0,57,0,62,0,62,0,69,0,69,0,72,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,79,78,74,69,0,0,0,0,62,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,60,0,0,10,0,10,0,0,60,0,0,25,0,20,0,0,60,10,0,10,0,10,35,0,60,10,0,35,0,0,69,0,69,0,74,0,74,0,81,0,81,0,83,0,83,0,81,0,81,0,74,0,76,0,74,0,74,0,0,0,0,0,62,1,1,1,69,1,71,1,1,1,69,1,1,1,64,1,1,69,1,1,62,1,1,1,1,1,1,1,0,0,64,0,0,0,0,0,0,0,2,32,64,0,0,0,0,0,64,1,1,69,1,1,62,1,1,1,64,1,66,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,67,1,1,1,66,1,1,1,64,1,62,1,1,1,59,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,32,48,64,0,0,69,0,69,0,74,86,74,0,81,0,81,0,83,91,83,0,81,0,81,0,74,86,76,0,74,86,91,90,86,81,83,0,81,0,81,0,74,0,76,0,74,0,74,0,86,0,69,1,1,1,0,0,0,0,0,0,0,0,69,1,1,1,67,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,69,1,1,69,0,0,0,0,67,1,1,67,0,0,0,0,71,1,1,1,0,0,0,0,0,0,0,0,71,1,1,1,72,1,1,1,0,0,0,0,0,0,0,0,72,1,1,1,71,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,72,1,1,67,0,0,0,0,72,1,1,67,0,0,0,0,65,1,1,1,0,0,0,0,0,0,0,0,76,1,1,1,74,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,77,1,1,72,0,0,0,0,76,1,1,71,0,0,0,0,31,1,1,1,38,1,41,43,0,41,1,38,41,0,43,1,38,1,50,1,0,0,38,1,41,1,53,1,41,53,0,55,0,0,74,0,74,0,79,0,79,0,86,0,86,0,88,0,88,0,86,0,86,0,79,0,81,0,79,0,79,0,0,0,0,0,74,0,74,0,79,91,79,0,86,0,86,0,88,96,88,0,86,0,86,0,79,91,81,0,79,91,96,95,91,86,0,0,67,1,1,1,74,1,76,1,1,1,74,1,1,1,69,1,1,74,1,1,67,1,1,1,1,1,1,1,0,0,88,0,86,0,86,0,79,0,81,0,79,0,79,0,91,0,69,1,1,74,1,1,67,1,1,1,69,1,71,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,72,1,1,1,71,1,1,1,69,1,67,1,1,1,64,1,1,1,26,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,100,0,0,0,100,0,0,30,100,0,0,0,100,0,0,0,90,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,60,1,1,1,0,0,0,0,0,0,0,0,60,1,1,1,57,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,66,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,69,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,69,74,81,0,74,81,86,0,0,0,0,0,0,0,0,91,90,86,81,0,0,0,0,0,0,0,0,0,0,0,0,93,86,81,78,74,69,74,78,0,0,0,0,0,74,81,74,81,78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
const instrumentspatternlists: i8[] = [1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,25,26,27,28,25,26,27,28,25,26,27,28,25,26,27,28,25,26,27,28,25,26,27,28,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,25,26,27,28,25,26,27,28,25,26,27,28,25,26,27,28,25,26,27,28,25,26,27,28,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,88,88,88,89,88,88,88,89,1,1,1,100,0,0,0,0,0,0,0,0,20,21,22,23,20,21,22,24,0,0,0,0,0,0,0,0,42,42,42,42,42,42,42,42,42,42,42,42,42,42,42,42,0,0,0,0,0,0,63,0,20,21,22,23,20,21,22,24,0,0,0,0,0,0,0,0,42,42,42,42,42,42,42,42,42,42,42,42,42,42,42,42,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,105,35,106,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,30,31,0,29,30,40,41,29,30,31,0,29,30,31,0,29,30,31,0,29,30,31,0,0,0,0,0,61,62,0,0,0,0,0,0,0,0,0,0,29,30,31,0,29,30,40,41,29,30,31,0,29,30,31,0,29,30,31,0,29,30,31,0,0,0,0,0,0,0,0,0,66,67,0,0,66,67,0,0,66,67,75,76,66,77,75,76,90,91,92,93,90,96,92,93,107,108,109,110,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,101,101,101,6,5,5,5,5,5,5,5,19,5,5,5,5,5,5,5,19,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,58,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,19,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,58,5,5,5,5,64,64,64,65,64,64,64,65,64,64,64,65,64,64,64,65,64,64,64,65,64,64,64,65,64,64,64,65,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,102,7,8,9,10,7,8,9,10,7,8,9,10,7,8,9,10,32,33,33,34,32,33,33,34,32,33,33,34,32,33,33,34,32,33,33,34,32,33,33,34,7,8,9,10,7,8,9,10,7,8,9,10,7,8,9,10,32,33,33,34,32,33,33,34,32,33,33,34,32,33,33,34,32,33,33,34,32,33,33,34,7,8,9,10,7,8,9,10,7,8,9,10,7,8,9,10,7,8,9,10,7,8,9,10,12,78,79,80,12,78,79,80,7,8,9,0,11,12,13,14,11,12,13,14,11,12,13,14,11,12,13,14,35,36,36,35,35,36,36,35,35,36,36,35,35,36,36,35,35,36,36,35,35,36,36,35,11,12,13,14,11,12,13,14,11,12,13,14,11,12,13,14,35,36,36,35,35,36,36,35,35,36,36,35,35,36,36,35,35,36,36,35,35,36,36,35,11,12,13,14,11,12,13,14,11,12,13,14,11,12,13,14,11,12,13,14,11,12,13,14,81,82,83,84,81,82,83,84,11,12,13,0,15,16,17,18,15,16,17,18,15,16,17,18,15,16,17,18,37,38,38,38,37,38,38,38,37,38,38,38,37,38,38,38,37,38,38,38,37,38,38,38,15,16,17,18,15,16,17,18,15,16,17,18,15,16,17,18,37,38,38,38,37,38,38,38,37,38,38,38,37,38,38,38,37,38,38,38,37,38,38,38,15,16,17,18,15,16,17,18,15,16,17,18,15,16,17,18,15,16,17,18,15,16,17,18,7,85,86,87,7,85,86,87,15,103,104,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,32,0,0,0,32,0,0,0,32,0,0,0,32,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,32,0,0,0,32,0,0,0,32,0,0,0,32,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,44,43,45,43,44,43,46,37,47,48,49,52,53,54,49,59,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,44,43,45,43,44,43,46,37,47,48,49,52,53,54,49,22,0,0,0,0,0,0,0,68,69,0,0,68,71,72,73,68,69,0,0,68,71,72,73,94,95,0,0,94,97,98,99,105,35,106,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,51,51,0,55,56,51,57,60,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,51,51,0,55,56,51,57,0,0,0,0,0,0,0,0,70,0,0,0,70,0,74,0,70,0,0,0,70,0,74,0,70,0,0,0,70,0,74,0,0,0,50,0];


// ./node_modules/.bin/asc --runtime none assembly/wasi_main.ts --noAssert --use abort= -O3 -o build/index.wasm
// wasmer build/index.wasm | sox -S -t raw -b 32 -e float -r 44100 -c 2 - -d
export function _start(): void {
    const samplebuf = allocateSampleBuffer(128);
    setPatternsPtr(load<usize>(changetype<usize>(patterns)));
    setInstrumentPatternListPtr(load<usize>(changetype<usize>(instrumentspatternlists)), 116, 19);
    setBPM(123);
    
    const iov = new iovec();
    iov.buf = samplebuf;
    iov.buf_len = 128 * 8;
    
    const written_ptr = changetype<usize>(new ArrayBuffer(sizeof<usize>()));
    
    let previousTick: f64;
    do {
        previousTick = getTick();
        fillSampleBufferInterleaved();
        fd_write(1, changetype<usize>(iov), 1, written_ptr);
    } while(previousTick < getTick())
}